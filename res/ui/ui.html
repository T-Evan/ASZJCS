<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
      xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="layui/css/layui.css">
    <title>仗剑挂机助手</title>
    <style>
        #shouye:checked ~ ul li.richang_content {
            display: none;
        }
        #shouye:checked ~ ul li.yingdi_content {
            display: none;
        }
        #shouye:checked ~ ul li.maoxian_content {
            display: none;
        }
        #shouye:checked ~ ul li.lvtuan_content {
            display: none;
        }
        #shouye:checked ~ ul li.qita_content {
            display: none;
        }

        #richang:checked ~ ul li.shouye_content {
            display: none;
        }
        #richang:checked ~ ul li.yingdi_content {
            display: none;
        }
        #richang:checked ~ ul li.maoxian_content {
            display: none;
        }
        #richang:checked ~ ul li.lvtuan_content {
            display: none;
        }
        #richang:checked ~ ul li.qita_content {
            display: none;
        }

        #maoxian:checked ~ ul li.shouye_content {
            display: none;
        }
        #maoxian:checked ~ ul li.richang_content {
            display: none;
        }
        #maoxian:checked ~ ul li.yingdi_content {
            display: none;
        }
        #maoxian:checked ~ ul li.lvtuan_content {
            display: none;
        }
        #maoxian:checked ~ ul li.qita_content {
            display: none;
        }


        #yingdi:checked ~ ul li.shouye_content {
            display: none;
        }
        #yingdi:checked ~ ul li.richang_content {
            display: none;
        }
        #yingdi:checked ~ ul li.maoxian_content {
            display: none;
        }
        #yingdi:checked ~ ul li.lvtuan_content {
            display: none;
        }
        #yingdi:checked ~ ul li.qita_content {
            display: none;
        }

        #lvtuan:checked ~ ul li.shouye_content {
            display: none;
        }
        #lvtuan:checked ~ ul li.richang_content {
            display: none;
        }
        #lvtuan:checked ~ ul li.yingdi_content {
            display: none;
        }
        #lvtuan:checked ~ ul li.maoxian_content {
            display: none;
        }
        #lvtuan:checked ~ ul li.qita_content {
            display: none;
        }

        #qita:checked ~ ul li.shouye_content {
            display: none;
        }
        #qita:checked ~ ul li.richang_content {
            display: none;
        }
        #qita:checked ~ ul li.yingdi_content {
            display: none;
        }
        #qita:checked ~ ul li.maoxian_content {
            display: none;
        }
        #qita:checked ~ ul li.lvtuan_content {
            display: none;
        }

        form input {
            margin-top: 6px;
            margin-bottom: 6px;
            margin-right: 3px;
            height: 16px;
            width: 16px;
            position: relative;
            top: 2px;
        }

        label:hover {
            background-color: cyan;
            color: dodgerblue;
        }

        h3 {
            color: rgb(0,150,255);
        }

        h4 {
            color: rgb(0,150,255);
        }
        legend {
            color: rgb(0,150,255);
        }

    .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px; /* 添加间距以分隔复选框 */
    }
    .checkbox-item {
        display: flex;
        z-index: 2;
        align-items: center;
    }

    .gray-text {
        color: gray;
    }

     #countdown {
            margin-top: 10px;
            font-size: 18px;
            color: rgb(0,150,255);
        }

    .flex-container {
        display: flex;
        align-items: center; /* 垂直居中 */
    }
    label {
        margin-right: 10px; /* 为输入框留出一点空间 */
    }

    .shouye_container {
    display: flex;
    align-items: center; /* 水平居中 */
    }

    .shouye_item {
        flex: 1; /* 均分宽度 */
        text-align: center; /* 文本居中 */
        margin: 0 10px; /* 添加一些间距 */
    }

    .toast {
        position: fixed;
        bottom: 70px;
        right: 20px;
        background-color: #4caf50;
        color: white;
        padding: 15px 25px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 1;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
    }

    .show {
        opacity: 1;
    }

/* 头部样式 */
.header {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #1E9FFF;
    height: 50px; /* 增加高度 */
    width: 100%;
    text-align: center;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 8;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* 添加阴影效果 */
    transition: background-color 0.3s ease; /* 平滑过渡效果 */
}

.header:hover {
    background-color: #1C86EE; /* 鼠标悬停时改变背景颜色 */
}

.header h3 {
    color: white;
    font-size: 1.2em; /* 增大字体大小 */
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3); /* 添加文字阴影 */
    margin-bottom: 13px;
}

/* 按钮标签样式 */
.button-label {
    position: fixed;
    left: 0;
    width: 16.6%;
    height: 28px;
    color: #1E9FFF;
    background-color: white;
    border: 2px solid #1E9FFF;
    border-radius: 5px;
    text-align: center;
    font-size: 16px;
    z-index: 8;
    cursor: pointer; /* 鼠标指针变为手形 */
    transition: background-color 0.3s ease, color 0.3s ease; /* 平滑过渡效果 */
}

/* 鼠标悬停时的样式 */
.button-label:hover {
    background-color: #1E9FFF;
    color: white;
}

/* 鼠标点击时的样式 */
.button-label:active {
    background-color: #1C86EE;
    color: white;
}
    </style>
</head>
<body style="margin: 0;padding: 0;list-style: none;text-decoration: none;">
<div class="header">
    <h3 style="margin-left:110px;">仗剑挂机助手</h3>
    <h3 style="margin-left:95px;margin-bottom:20px;color:#98FB98" id="countdown">00</h3>
</div>
<div style="height: 36px; width: 100%;">
</div>
<div>
    <input checked id="shouye" name="sexx" style="display: none;z-index:8;" type="radio">
    <input id="richang" name="sexx" style="display: none;z-index:8;" type="radio">
    <input id="maoxian" name="sexx" style="display: none;z-index:8;" type="radio">
    <input id="yingdi" name="sexx" style="display: none;z-index:8;" type="radio">
    <input id="lvtuan" name="sexx" style="display: none;z-index:8;" type="radio">
    <input id="qita" name="sexx" style="display: none;z-index:8;" type="radio">
    <label class="button-label" for="shouye">
        首页
    </label>
    <label class="button-label" for="richang"
           style="left: 16.6%;">
        日常
    </label>
    <label class="button-label" for="maoxian"
           style="left: 33.2%;">
        副本
    </label>
    <label class="button-label" for="yingdi"
           style="left: 49.8%;">
        家园
    </label>
    <label class="button-label" for="lvtuan"
           style="left: 66.4%;">
        公会
    </label>
    <label class="button-label" for="qita"
           style="left: 83%;">
        其他
    </label>
    <ul style="margin:0px 3px;padding: 0px;width:100%;">
        <div style="height: 35px; width: 100%;background-color: white;"></div>
        <div id="toast" class="toast">保存成功</div>
        <li class="shouye_content">
            <h3>公告：Have Fun ！</h3>
            <br>
            <div class="flex-container">
                <fieldset>
                    <legend>激活码</legend>
                    <!--                    <input type="text" id="激活码" name="激活码" lay-verify="title"-->
                    <!--                           autocomplete="off"-->
                    <!--                           placeholder="无需输入，元旦畅玩" class="layui-input">-->
                    <input type="text" id="激活码" name="激活码" lay-verify="title"
                           autocomplete="off"
                           placeholder="激活码（留空可试用）" class="layui-input">
                </fieldset>
            </div>
            <form action="">
                <fieldset>
                    <legend>配置切换</legend>
                    <label class="gray-text">(第一次使用建议先点击下方按钮一键配置，然后直接下拉点击运行)</label><br><br>
                    <button onclick="dailyAllItems()"
                            style="margin-bottom:5px;color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                            type="button">
                        一键日常配置
                    </button>
                    <button onclick="shuaZanAllItems()"
                            style="margin-bottom:5px;color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                            type="button">
                        一键刷币配置
                    </button>
                    <div class="flex-container">
                        <label class="gray-text">1</label><input type="text" id="配置1名称" name="配置1"
                                                                 lay-verify="title" autocomplete="off"
                                                                 placeholder="配置1" class="layui-input"
                                                                 style="height: 30px;width: 80px;margin-right:5px;">

                        <label style="margin-right:1px;" for="定时切换">，</label>
                        <div class="item" style="width: 35px">
                            <input type="text" id="配置1运行时长" name="配置1运行时长"
                                   lay-verify="title" autocomplete="off"
                                   placeholder="分" class="layui-input"
                                   style="height: 30px;width: 35px;">
                        </div>
                        <label style="margin-left:5px;" for="定时休息">分钟后切换配置</label>
                        <button onclick="saveConfigItems(1)"
                                style="color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                                type="button">
                            保存
                        </button>
                        <button onclick="readAllItems(1)"
                                style="margin-left:5px;color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                                type="button">
                            读取
                        </button>
                    </div>
                    <div class="flex-container">
                        <label class="gray-text">2</label><input type="text" id="配置2名称" name="配置2"
                                                                 lay-verify="title" autocomplete="off"
                                                                 placeholder="配置2" class="layui-input"
                                                                 style="height: 30px;width: 80px;margin-right:5px;">
                        <label style="margin-right:1px;" for="定时切换">，</label>
                        <div class="item" style="width: 35px">
                            <input type="text" id="配置2运行时长" name="配置2运行时长"
                                   lay-verify="title" autocomplete="off"
                                   placeholder="分" class="layui-input"
                                   style="height: 30px;width: 35px;">
                        </div>
                        <label style="margin-left:5px;" for="定时休息">分钟后切换配置</label>
                        <button onclick="saveConfigItems(2)"
                                style="color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                                type="button">
                            保存
                        </button>
                        <button onclick="readAllItems(2)"
                                style="margin-left:5px;color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                                type="button">
                            读取
                        </button>
                    </div>
                    <div class="flex-container">
                        <label class="gray-text">3</label><input type="text" id="配置3名称" name="配置3"
                                                                 lay-verify="title" autocomplete="off"
                                                                 placeholder="配置3" class="layui-input"
                                                                 style="height: 30px;width: 80px;margin-right:5px;">
                        <label style="margin-right:1px;" for="定时切换">，</label>
                        <div class="item" style="width: 35px">
                            <input type="text" id="配置3运行时长" name="配置3运行时长"
                                   lay-verify="title" autocomplete="off"
                                   placeholder="分" class="layui-input"
                                   style="height: 30px;width: 35px;">
                        </div>
                        <label style="margin-left:5px;" for="定时休息">分钟后切换配置</label>
                        <button onclick="saveConfigItems(3)"
                                style="color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                                type="button">
                            保存
                        </button>
                        <button onclick="readAllItems(3)"
                                style="margin-left:5px;color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 12px;"
                                type="button">
                            读取
                        </button>
                    </div>
                    <div class="flex-container">
                        <label style="width:95px;" for="选择启动配置">选择启动配置:</label>
                        <div class="layui-form">
                            <div class="layui-input-inline">
                                <select name="选择启动配置" id="选择启动配置" lay-filter="mijing1-filter">
                                    <option value="0">默认(不切换配置)</option>
                                    <option value="1">配置1</option>
                                    <option value="2">配置2</option>
                                    <option value="3">配置3</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <label class="gray-text">！配置定时切换不可与多账号自动切换同时使用！</label>
                    <div class="flex-container">
                        <label for="选择游戏版本">游戏版本:</label>
                        <div class="layui-form">
                            <div class="layui-input-inline">
                                <select name="选择游戏版本" id="选择游戏版本" lay-filter="mijing1-filter">
                                    <option value="雷霆官服(公测)">雷霆官服(公测)</option>
                                    <option value="哔哩哔哩服(公测)">哔哩哔哩服(公测)</option>
                                    <option value="雷霆官服(内测)">雷霆官服(内测)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </form>
            <form action="">
                <fieldset>
                    <legend>定时配置</legend>
                    <div class="shouye_container">
                        <div class="item">
                            <label for="定时运行">运行</label>
                        </div>
                        <div class="item" style="width: 50px">
                            <input type="text" id="定时运行" name="定时运行" lay-verify="title" autocomplete="off"
                                   placeholder="分钟" class="layui-input">
                        </div>
                        <div class="item">
                            <label for="定时休息">分钟后休息</label>
                        </div>
                        <div class="item" style="width: 50px">
                            <input type="text" id="定时休息" name="定时休息" lay-verify="title" autocomplete="off"
                                   placeholder="分钟" class="layui-input">
                        </div>
                        <div class="item">
                            <label for="定时休息">分钟</label>
                        </div>
                    </div>
                    <div class="shouye_container">
                        <div class="item">
                            <label for="顶号等待">顶号等待</label>
                        </div>
                        <div class="item" style="width: 50px">
                            <input type="text" id="顶号等待" name="顶号等待" lay-verify="title" autocomplete="off"
                                   placeholder="分钟" class="layui-input">
                        </div>
                        <div class="item">
                            <label for="顶号等待">分钟后重新登录</label>
                        </div>
                    </div>
                </fieldset>
            </form>
        </li>

        <li class="richang_content">
            <form action="">
                <fieldset>
                    <legend>日常功能</legend>
                    <input id="日常总开关" name="vehicle" type="checkbox" value="Bike">日常总开关<br>
                    <legend>主线相关</legend>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input id="自动主线" name="vehicle" type="checkbox" value="Bike">自动主线<br>
                        </div>
                    </div>
                    <legend>家园相关</legend>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input id="日常任务领取" name="vehicle" type="checkbox" value="Bike">日常任务领取<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="小推车领取" name="vehicle" type="checkbox" value="Bike">小推车领取<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="小木床领取" name="vehicle" type="checkbox" value="Bike">小木床领取<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="命运之树领取" name="vehicle" type="checkbox" value="Bike">命运之树领取<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="邮件领取" name="vehicle" type="checkbox" value="Bike">邮件领取<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="每日商店" name="vehicle" type="checkbox" value="Bike">每日商店<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="家园清理" name="vehicle" type="checkbox" value="Bike">家园清理(施工中)<br>
                        </div>
                    </div>
                    <legend>角色相关</legend>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input id="自动更换装备" name="vehicle" type="checkbox"
                                   value="Bike">自动更换装备<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="自动强化装备" name="vehicle" type="checkbox"
                                   value="Bike">自动强化装备<br>
                        </div>
                    </div>
                </fieldset>
            </form>
        </li>

        <li class="yingdi_content">
            <form action="">
                <fieldset>
                    <legend>家园功能</legend>
                </fieldset>
            </form>
        </li>

        <li class="maoxian_content">
            <form action="">
                <fieldset>
                    <legend>副本功能</legend>
                    <input id="副本总开关" name="vehicle" type="checkbox" value="Bike">副本总开关<br>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input id="幻想阶梯" name="vehicle" type="checkbox" value="Bike">幻想阶梯<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="日常副本" name="vehicle" type="checkbox" value="Bike">日常副本<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="圣兽试炼" name="vehicle" type="checkbox" value="Bike">圣兽试炼(施工中)<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="素材秘境" name="vehicle" type="checkbox" value="Bike">素材秘境<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="虚空裂隙" name="vehicle" type="checkbox" value="Bike">虚空裂隙(施工中)<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="混沌侵袭" name="vehicle" type="checkbox" value="Bike">混沌侵袭(施工中)<br>
                        </div>
                    </div>
                    <div class="checkbox-item">
                        <input id="地图探索" name="vehicle" type="checkbox" value="Bike">地图探索<br>
                    </div>
                    <label for="地图探索配置">地图探索配置:</label><br>
                    <div class="flex-container">
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input id="金币探索" name="vehicle" type="checkbox" value="Bike">金币探索<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="粗炼石探索" name="vehicle" type="checkbox"
                                       value="Bike">粗炼石探索<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="时之砂探索" name="vehicle" type="checkbox"
                                       value="Bike">时之砂探索<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="历战精华探索" name="vehicle" type="checkbox"
                                       value="Bike">历战精华探索<br>
                            </div>
                            <input type="text" id="探索次数" name="探索次数" lay-verify="title"
                                   autocomplete="off"
                                   placeholder="探索次数（默认选中物品各采集15次）" class="layui-input">
                        </div>
                    </div>
                </fieldset>
            </form>
        </li>
        <li class="lvtuan_content">
            <form action="">
                <fieldset>
                    <input id="公会总开关" name="vehicle" type="checkbox" value="Bike">公会总开关<br>
                    <legend>公会功能</legend>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input id="公会捐赠" name="vehicle" type="checkbox" value="Bike">公会捐赠<br>
                        </div>
                        <div class="checkbox-item">
                            <input id="公会挂机奖励" name="vehicle" type="checkbox" value="Bike">挂机奖励<br>
                        </div>
                    </div>
                </fieldset>
            </form>
        </li>
        <li class="qita_content">
            <form action="">
                <fieldset>
                    <legend>活动相关</legend>
                    <fieldset>
                        <legend>常驻活动</legend>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input id="每日签到" name="vehicle" type="checkbox" value="Bike">每日签到<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="成长试炼" name="vehicle" type="checkbox" value="Bike">成长试炼<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="启程签到" name="vehicle" type="checkbox" value="Bike">启程签到<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="菜就多躺" name="vehicle" type="checkbox" value="Bike">菜就多躺<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="巡礼之证" name="vehicle" type="checkbox"
                                       value="Bike">巡礼之证<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="每日特惠" name="vehicle" type="checkbox"
                                       value="Bike">每日特惠<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="本周精选" name="vehicle" type="checkbox"
                                       value="Bike">本周精选<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="月卡领取" name="vehicle" type="checkbox" value="Bike">月卡领取<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="秘宝大作战" name="vehicle" type="checkbox" value="Bike">秘宝大作战(施工中)<br>
                            </div>
                            <div class="checkbox-item">
                                <input id="其他签到活动" name="vehicle" type="checkbox"
                                       value="Bike">其他签到活动<br>
                            </div>
                            <label class="gray-text">(5.29："启程好礼、幻想学院、魔法文具")</label><br>
                        </div>
                    </fieldset>
                    <fieldset>
                        <legend>限时活动</legend>
                    </fieldset>
                </fieldset>
                <fieldset>
                    <legend>喊话相关</legend>
                </fieldset>
            </form>
        </li>

    </ul>
</div>
<div style="  display: flex; margin-bottom: 30px; align-items: center;justify-content: center; width: 100%; height: 46px; position: sticky;">
    <button id="guanbi" onclick="wclose()"
            style="flex: 1;height: 40px;color: #1E9FFF; background-color: white;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 16px;"
            type="button"
            value="关闭">
        退出
    </button>
    <button id="queding" onclick="submit()"
            style="flex: 1;height: 40px;color: white; background-color: #1E9FFF;border: 2px solid #1E9FFF; border-radius: 5px;font-size: 16px;"
            type="button"
            value="确定">
        运行
    </button>
</div>
<!-- 引入 layui.js 的 <script> 标签最好放置在 html 末尾 -->
<script src="layui/layui.js"></script>
<script src="layui/jquery-3.6.1.js"></script>
<script type="text/javascript">
    // 定义一个函数用于保存开关的状态到 localStorage
    function saveSwitchStatus(id) {
        var isChecked = document.getElementById(id).checked;
        localStorage.setItem(id, isChecked);
        return isChecked
    }

    function deleteAllItems(configNum) {
        localStorage.clear();
        console.log('当前配置 已清空');
        setAllItems()
    }

    function saveConfigItems(configNum) {
        saveAllItems()
        const allItems = {};

        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (!key.includes('config') && !key.includes('账号') && !key.includes('角色') && !key.includes('激活码') && !key.includes('配置')) {
                const value = localStorage.getItem(key);
                allItems[key] = value;
            }
        }
        const jsonString = JSON.stringify(allItems, null, 2);
        localStorage.setItem('config' + configNum, jsonString);

<!--        console.log('All Items:', localStorage.getItem("config1"));-->
        showToast('保存成功')
    }

     function showToast(message) {
        var toast = document.getElementById('toast');
        toast.innerHTML = message; // 设置 toast 的内容
        toast.classList.add('show');

        setTimeout(function() {
            toast.classList.remove('show');
        }, 2000); // 3秒后自动隐藏
    }

    function toggleInviteToast() {
        var isChecked = document.getElementById('秘境自动接收邀请').checked;
        var isChecked2 = document.getElementById('恶龙自动接收邀请').checked;
        var isChecked3 = document.getElementById('梦魇自动接收邀请').checked;
        var isChecked4 = document.getElementById('绝境自动接收邀请').checked;
        var isChecked5 = document.getElementById('暴走自动接收邀请').checked;
        var isChecked6 = document.getElementById('终末战自动接收邀请').checked;
        var isChecked7 = document.getElementById('三魔头自动接收邀请').checked;
        if (isChecked || isChecked2 || isChecked3 || isChecked4 || isChecked5 || isChecked6 || isChecked7) {
            showToast('开启自动接收组队邀请，自动任务将暂停执行');
        }
    }

    function toggleAIStartToast() {
        var isChecked = document.getElementById('AI进入战斗后启动').checked;
        var isChecked2 = document.getElementById('暴走进入战斗后启动').checked;
        var isChecked3 = document.getElementById('技能进入战斗后启动').checked;
        if (isChecked || isChecked2 || isChecked3) {
            showToast('开启进入战斗后启动，自动任务将暂停执行');
        }
    }

    function shuaZanAllItems() {
        const jsonString = '{"顶号等待":"20","日常总开关":true,"自动主线":false,"副本总开关":true,"幻想阶梯":false,"日常副本":true,"地图探索":false,"金币探索":false,"粗炼石探索":false,"时之砂探索":false,"历战精华探索":false,"探索次数":"","素材秘境":false,"日常任务领取":false,"自动更换装备":false,"自动强化装备":false,"小推车领取":true,"小木床领取":true,"命运之树领取":true,"邮件领取":false,"每日商店":false,"每日签到":false,"成长试炼":false,"启程签到":false,"菜就多躺":false,"巡礼之证":false,"每日特惠":false,"本周精选":false,"月卡领取":false,"秘宝大作战":false,"其他签到活动":false,"公会总开关":false,"公会捐赠":false,"公会挂机奖励":false}'
        if (jsonString) {
            try {
<!--                console.log('读取的配置:', jsonString);-->
                const configData = JSON.parse(jsonString); // 将 JSON 字符串转换回对象

                // 遍历 configData 对象的每个键值对
                for (const key in configData) {
                    if (configData.hasOwnProperty(key)) {
                        if (!key.includes('config') && !key.includes('账号') && !key.includes('角色') && !key.includes('激活码') && !key.includes('配置')) {
                            localStorage.setItem(key, configData[key]);
                        }
                    }
                }
                setAllItems()
                showToast('加载默认配置成功，请继续调整')
            } catch (error) {
                console.error('解析 JSON 失败:', error);
            }
        } else {
            console.log('没有找到配置');
        }
    }

    function daiDuiAllItems() {
        const jsonString = '{"顶号等待":"20","日常总开关":true,"自动主线":true,"副本总开关":true,"幻想阶梯":true,"日常副本":true,"地图探索":false,"金币探索":true,"粗炼石探索":false,"时之砂探索":false,"历战精华探索":false,"探索次数":"","素材秘境":true,"日常任务领取":true,"自动更换装备":true,"自动强化装备":true,"小推车领取":true,"小木床领取":true,"命运之树领取":true,"邮件领取":true,"每日商店":true,"每日签到":true,"成长试炼":true,"启程签到":true,"菜就多躺":true,"巡礼之证":true,"每日特惠":true,"本周精选":true,"月卡领取":true,"秘宝大作战":false,"其他签到活动":true,"公会总开关":true,"公会捐赠":true,"公会挂机奖励":true}'
        if (jsonString) {
            try {
<!--                console.log('读取的配置:', jsonString);-->
                const configData = JSON.parse(jsonString); // 将 JSON 字符串转换回对象

                // 遍历 configData 对象的每个键值对
                for (const key in configData) {
                    if (configData.hasOwnProperty(key)) {
                        if (!key.includes('config') && !key.includes('账号') && !key.includes('角色') && !key.includes('激活码') && !key.includes('配置')) {
                            localStorage.setItem(key, configData[key]);
                        }
                    }
                }
                setAllItems()
                showToast('加载默认配置成功，请继续调整')
            } catch (error) {
                console.error('解析 JSON 失败:', error);
            }
        } else {
            console.log('没有找到配置');
        }
    }

    function dailyAllItems() {
        const jsonString = '{"顶号等待":"20","日常总开关":true,"自动主线":true,"副本总开关":true,"幻想阶梯":true,"日常副本":true,"地图探索":true,"金币探索":true,"粗炼石探索":false,"时之砂探索":false,"历战精华探索":false,"探索次数":"","素材秘境":true,"日常任务领取":true,"自动更换装备":true,"自动强化装备":true,"小推车领取":true,"小木床领取":true,"命运之树领取":true,"邮件领取":true,"每日商店":true,"每日签到":true,"成长试炼":true,"启程签到":true,"菜就多躺":true,"巡礼之证":true,"每日特惠":true,"本周精选":true,"月卡领取":true,"秘宝大作战":false,"其他签到活动":true,"公会总开关":true,"公会捐赠":true,"公会挂机奖励":true}'
        if (jsonString) {
            try {
<!--                console.log('读取的配置:', jsonString);-->
                const configData = JSON.parse(jsonString); // 将 JSON 字符串转换回对象

                // 遍历 configData 对象的每个键值对
                for (const key in configData) {
                    if (configData.hasOwnProperty(key)) {
                        if (!key.includes('config') && !key.includes('账号') && !key.includes('角色') && !key.includes('激活码') && !key.includes('配置')) {
                            localStorage.setItem(key, configData[key]);
                        }
                    }
                }
                setAllItems()
                showToast('加载默认配置成功，请继续调整')
            } catch (error) {
                console.error('解析 JSON 失败:', error);
            }
        } else {
            console.log('没有找到配置');
        }
    }

    function qiHaoAllItems() {
        const jsonString = '{"顶号等待":"20","日常总开关":true,"自动主线":true,"副本总开关":true,"幻想阶梯":true,"日常副本":true,"地图探索":false,"金币探索":true,"粗炼石探索":false,"时之砂探索":false,"历战精华探索":false,"探索次数":"","素材秘境":true,"日常任务领取":true,"自动更换装备":true,"自动强化装备":true,"小推车领取":true,"小木床领取":true,"命运之树领取":true,"邮件领取":true,"每日商店":true,"每日签到":true,"成长试炼":true,"启程签到":true,"菜就多躺":true,"巡礼之证":true,"每日特惠":true,"本周精选":true,"月卡领取":true,"秘宝大作战":false,"其他签到活动":true,"公会总开关":true,"公会捐赠":true,"公会挂机奖励":true}'
        if (jsonString) {
            try {
<!--                console.log('读取的配置:', jsonString);-->
                const configData = JSON.parse(jsonString); // 将 JSON 字符串转换回对象

                // 遍历 configData 对象的每个键值对
                for (const key in configData) {
                    if (configData.hasOwnProperty(key)) {
                        if (!key.includes('config') && !key.includes('账号') && !key.includes('角色') && !key.includes('激活码') && !key.includes('配置')) {
                            localStorage.setItem(key, configData[key]);
                        }
                    }
                }
                setAllItems()
                showToast('加载默认配置成功，请继续调整')
            } catch (error) {
                console.error('解析 JSON 失败:', error);
            }
        } else {
            console.log('没有找到配置');
        }
    }

    function readAllItems(configNum) {
        const jsonString = localStorage.getItem('config' + configNum);
        if (jsonString) {
            try {
<!--                console.log('读取的配置:', jsonString);-->
                const configData = JSON.parse(jsonString); // 将 JSON 字符串转换回对象

                // 遍历 configData 对象的每个键值对
                for (const key in configData) {
                    if (configData.hasOwnProperty(key)) {
                        if (!key.includes('config') && !key.includes('账号') && !key.includes('角色') && !key.includes('激活码') && !key.includes('配置')) {
                            localStorage.setItem(key, configData[key]);
                        }
                    }
                }
                setAllItems()
                showToast('加载成功')
            } catch (error) {
                console.error('解析 JSON 失败:', error);
            }
        } else {
            console.log('没有找到配置');
        }
    }

    let isAutoClicked = false;
    function autoClickButton() {
        const button = document.getElementById('queding');
        const countdownElement = document.getElementById('countdown');

        if (button && countdownElement) {
            let remainingTime = 300;
            countdownElement.textContent = `${remainingTime}`;

            const intervalId = setInterval(() => {
                remainingTime--;
                countdownElement.textContent = `${remainingTime}`;

                if (remainingTime <= 0) {
                    clearInterval(intervalId);
                    if (!isAutoClicked) {
                        button.click();  // 触发按钮的点击事件
                        console.log("按钮已点击");
                        isAutoClicked = true;
                    }
                }
            }, 1000);  // 每秒更新一次倒计时
        } else {
            console.error("未找到按钮或倒计时元素");
        }
    }

    function setAllItems() {
        var 激活码 = localStorage.getItem("激活码");
        document.getElementById("激活码").value = 激活码;

        var 定时运行 = localStorage.getItem("定时运行");
        document.getElementById("定时运行").value = 定时运行;

        var 定时休息 = localStorage.getItem("定时休息");
        document.getElementById("定时休息").value = 定时休息;

        var 顶号等待 = localStorage.getItem("顶号等待");
        document.getElementById("顶号等待").value = 顶号等待;

        <!--日常-->
        setSwitchStatus("日常总开关");

        setSwitchStatus("自动主线");
        setSwitchStatus("副本总开关");
        setSwitchStatus("幻想阶梯");
        setSwitchStatus("日常副本");
        setSwitchStatus("地图探索");
        setSwitchStatus("金币探索");
        setSwitchStatus("粗炼石探索");
        setSwitchStatus("时之砂探索");
        setSwitchStatus("历战精华探索");
        var 探索次数 = localStorage.getItem("探索次数");
        document.getElementById("探索次数").value = 探索次数;
        
        setSwitchStatus("圣兽试炼");
        setSwitchStatus("素材秘境");
        setSwitchStatus("虚空裂隙");
        setSwitchStatus("混沌侵袭");

        setSwitchStatus("日常任务领取");
        setSwitchStatus("小推车领取");
        setSwitchStatus("小木床领取");
        setSwitchStatus("命运之树领取");
        setSwitchStatus("邮件领取");
        setSwitchStatus("每日商店");
        setSwitchStatus("每日签到");
        setSwitchStatus("成长试炼");
        setSwitchStatus("启程签到");
        setSwitchStatus("菜就多躺");

        setSwitchStatus("家园清理");
        setSwitchStatus("巡礼之证");
        setSwitchStatus("每日特惠");
        setSwitchStatus("本周精选");
        setSwitchStatus("月卡领取");
        setSwitchStatus("秘宝大作战");
        setSwitchStatus("其他签到活动");

        setSwitchStatus("自动更换装备");
        setSwitchStatus("自动强化装备");

        setSwitchStatus("公会总开关");
        setSwitchStatus("公会捐赠");
        setSwitchStatus("公会挂机奖励");

        var defaultValue = localStorage.getItem('选择游戏版本');
        var selectElement = document.getElementById('选择游戏版本');
        for (var i = 0; i < selectElement.options.length; i++) {
            if (selectElement.options[i].value === defaultValue) {
                selectElement.options[i].selected = true;
                break;
            }
        }

        // 重新渲染 select 元素
        layui.form.render('select');
    }

    window.onload = function () {
        console.log("窗口加载成功了");
        autoClickButton();
        airscript.call("加载", "成功");
        setAllItems()
    };

    layui.use(['form'], function(){
      var form = layui.form;

      // 监听秘境选择框的选择事件
      form.on('select(mijing1-filter)', function(data){
        var mjId = data.value;
        console.log(mjId);
        var $mjgqSelect = $('#秘境关卡');

        if(mjId === '原野') {
          $mjgqSelect.html('<option value="古遗迹上的幽影">古遗迹上的幽影</option>');
        }

        form.render('select'); // 更新城市选择框的UI
      });
    });

    // 定义一个函数用于处理开关的状态设置
    function setSwitchStatus(id) {
        var itemValue = localStorage.getItem(id);
        document.getElementById(id).checked = itemValue === "true";
    }

    function xgip(xip) {
        document.getElementById("bjip").innerHTML = xip;
    }

    function saveAllItems() {
        var 激活码 = document.getElementById("激活码").value;
        localStorage.setItem("激活码", 激活码);

        var 定时运行 = document.getElementById("定时运行").value;
        localStorage.setItem("定时运行", 定时运行);

        var 定时休息 = document.getElementById("定时休息").value;
        localStorage.setItem("定时休息", 定时休息);

        var 顶号等待 = document.getElementById("顶号等待").value;
        localStorage.setItem("顶号等待", 顶号等待);

        <!--日常-->
        日常总开关 = saveSwitchStatus("日常总开关");
        自动主线 = saveSwitchStatus("自动主线");
        副本总开关 = saveSwitchStatus("副本总开关");
        幻想阶梯 = saveSwitchStatus("幻想阶梯");
        日常副本 = saveSwitchStatus("日常副本");
        地图探索 = saveSwitchStatus("地图探索");
        金币探索 = saveSwitchStatus("金币探索");
        粗炼石探索 = saveSwitchStatus("粗炼石探索");
        时之砂探索 = saveSwitchStatus("时之砂探索");
        历战精华探索 = saveSwitchStatus("历战精华探索");
        var 探索次数 = document.getElementById("探索次数").value;
        localStorage.setItem("探索次数", 探索次数);
        
        素材秘境 = saveSwitchStatus("素材秘境");

        日常任务领取 = saveSwitchStatus("日常任务领取");
        自动更换装备 = saveSwitchStatus("自动更换装备");
        自动强化装备 = saveSwitchStatus("自动强化装备");
        小推车领取 = saveSwitchStatus("小推车领取");
        小木床领取 = saveSwitchStatus("小木床领取");
        命运之树领取 = saveSwitchStatus("命运之树领取");
        邮件领取 = saveSwitchStatus("邮件领取");
        每日商店 = saveSwitchStatus("每日商店");
        每日签到 = saveSwitchStatus("每日签到");
        成长试炼 = saveSwitchStatus("成长试炼");
        启程签到 = saveSwitchStatus("启程签到");
        菜就多躺 = saveSwitchStatus("菜就多躺");

        巡礼之证 = saveSwitchStatus("巡礼之证");
        每日特惠 = saveSwitchStatus("每日特惠");
        本周精选 = saveSwitchStatus("本周精选");
        月卡领取 = saveSwitchStatus("月卡领取");
        秘宝大作战 = saveSwitchStatus("秘宝大作战");
        其他签到活动 = saveSwitchStatus("其他签到活动");

        公会总开关 = saveSwitchStatus("公会总开关");
        公会捐赠 = saveSwitchStatus("公会捐赠");
        公会挂机奖励 = saveSwitchStatus("公会挂机奖励");


        var 选择游戏版本 = document.getElementById("选择游戏版本").value;
        localStorage.setItem("选择游戏版本", 选择游戏版本);

        var data = {
            激活码: 激活码,
            选择游戏版本: 选择游戏版本,

            定时运行: 定时运行,
            定时休息: 定时休息,
            顶号等待: 顶号等待,

            <!--日常-->
            日常总开关: 日常总开关,
            自动主线: 自动主线,

            副本总开关: 副本总开关,
            幻想阶梯: 幻想阶梯,
            日常副本: 日常副本,
            地图探索: 地图探索,
            金币探索: 金币探索,
            粗炼石探索: 粗炼石探索,
            时之砂探索: 时之砂探索,
            历战精华探索: 历战精华探索,
            探索次数: 探索次数,

            素材秘境: 素材秘境,

            日常任务领取: 日常任务领取,
            自动更换装备: 自动更换装备,
            自动强化装备: 自动强化装备,

            小推车领取: 小推车领取,
            小木床领取: 小木床领取,
            命运之树领取: 命运之树领取,
            邮件领取: 邮件领取,
            每日商店: 每日商店,
            每日签到: 每日签到,
            成长试炼: 成长试炼,
            启程签到: 启程签到,
            菜就多躺: 菜就多躺,

            巡礼之证: 巡礼之证,
            每日特惠: 每日特惠,
            本周精选: 本周精选,
            月卡领取: 月卡领取,
            秘宝大作战: 秘宝大作战,
            其他签到活动: 其他签到活动,

            公会总开关: 公会总开关,
            公会捐赠: 公会捐赠,
            公会挂机奖励: 公会挂机奖励,
        };

        return data
    }

    function submit() {
<!--        console.log("点击了确定");-->
        isAutoClicked = true;
        data = saveAllItems()
        // 将data 转为JSON文件传递给PY
        airscript.call("submit", JSON.stringify(data));
        airscript.close();
    }

    function wclose() {
        var guan = document.getElementById("guanbi").value;
        airscript.call("guan", guan);
        console.log("退出程序" + guan);
        airscript.close();
    }
</script>

</body>

</html>